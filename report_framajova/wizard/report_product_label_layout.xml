<odoo>

    <record id="paperformat_product_label_101x151_landscape" model="report.paperformat">
        <field name="name">Product Label 101x151 Landscape</field>
        <field name="default" eval="False"/>
        <field name="page_height">101</field> <!-- Altura en mm (horizontal) -->
        <field name="page_width">151</field> <!-- Ancho en mm (horizontal) -->
        <field name="orientation">Landscape</field>
        <field name="margin_top">20</field>
        <field name="margin_bottom">5</field>
        <field name="margin_left">5</field>
        <field name="margin_right">5</field>
    </record>
    <template id="custom_report_layout">
        <t t-call="web.basic_layout">
            <div class="page">
                <!-- Logo de la compañía en la esquina superior derecha -->
                <t t-set="company" t-value="user.company_id"/>
                <div class="row">
                    <div class="col-9"></div>
                    <div class="col-3">
                        <img t-if="company.logo" t-att-src="image_data_uri(company.logo)"
                             style="max-height: 60px;"
                             alt="Logo"/>

                    </div>
                </div>

                <t t-raw="0"/>
            </div>
        </t>
    </template>

    <template id="product_template_label_101x151_template">

        <div class="page">
            <!-- Customize the content of each label with the data of `doc` -->
            <h2>Etiqueta de Producto Personalizada 101x151</h2>
            <div>
                <span>Nombre del Producto:</span>
                <span t-field="product.display_name"/>
            </div>

        </div>

    </template>

    <template id="pnt_report_productlabel">

        <t t-if="columns and rows">
            <t t-set="rows" t-value="1"/>
            <t t-set="columns" t-value="1"/>
            <t t-foreach="range(page_numbers)" t-as="page">
                <div style="margin-left:-10px !important">
                    <table style="border-collapse:separate; border-spacing:11.8px 11.8px;">
                        <tr>
                            <t t-foreach="range(columns)" t-as="column">
                                <t t-if="not current_quantity and quantity and not (current_data and current_data[1])">
                                    <t t-set="current_data" t-value="quantity.popitem()"/>
                                    <t t-set="product" t-value="current_data[0]"/>
                                    <t t-set="barcode_and_qty" t-value="current_data[1].pop()"/>
                                    <t t-set="barcode" t-value="barcode_and_qty[0]"/>
                                    <t t-set="current_quantity" t-value="barcode_and_qty[1]"/>
                                </t>
                                <t t-if="current_quantity">
                                    <t t-set="make_invisible" t-value="False"/>
                                    <t t-set="current_quantity" t-value="current_quantity - 1"/>
                                </t>
                                <t t-elif="current_data and current_data[1]">
                                    <t t-set="barcode_and_qty" t-value="current_data[1].pop()"/>
                                    <t t-set="barcode" t-value="barcode_and_qty[0]"/>
                                    <t t-set="current_quantity" t-value="barcode_and_qty[1] - 1"/>
                                </t>
                                <t t-else="">
                                    <t t-set="make_invisible" t-value="True"/>
                                </t>
                                <t t-call="report_framajova.product_template_label_101x151_template"/>
                            </t>
                        </tr>

                    </table>
                </div>
            </t>
        </t>

    </template>

    <template id="pnt_report_product_template_label">
        <t t-call="report_framajova.custom_report_layout">

            <t t-call="report_framajova.pnt_report_productlabel">
                <t t-set="products" t-value="products"/>
            </t>

        </t>
    </template>

    <record id="report_action_product_template_label_101x151" model="ir.actions.report">
        <field name="name">Product Label 101x151 Landscape</field>
        <field name="model">product.label.layout</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">report_framajova.pnt_report_product_template_label</field>
        <field name="report_file">report_framajova.pnt_report_product_template_label</field>
        <field name="print_report_name">'Product Label (101x151) - ' + object.display_name</field>
        <field name="paperformat_id" ref="report_framajova.paperformat_product_label_101x151_landscape"/>


    </record>
</odoo>
